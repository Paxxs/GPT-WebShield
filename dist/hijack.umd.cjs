(function(c){typeof define=="function"&&define.amd?define(c):c()})(function(){"use strict";(()=>{const c=["closeai.biz"],m=window.fetch,u=window.XMLHttpRequest,w=()=>{const t="#toast-container{position:fixed;top:20px;right:20px;display:flex;flex-direction:column-reverse;gap:10px}.toast{background-color:rgba(0,0,0,.75);font-size:1rem;color:#fff;padding:5px;border-radius:5px;animation:4s forwards fadeOut}@keyframes fadeOut{from{opacity:1}to{opacity:0}}",e=document.createElement("style");e.textContent=t,document.head.appendChild(e)},i=(()=>{const t=document.createElement("div");return t.id="toast-container",document.body.appendChild(t),w(),t})(),d=t=>{const e=document.createElement("div");e.className="toast",e.textContent=t,i.appendChild(e),setTimeout(()=>{i.removeChild(e)},4e3)},l=t=>c.some(e=>t.includes(e)),n=(t,e,o="normal")=>{o==="external"?d(`🫥 外部${t}-${e.replace(/^https?:\/\//,"")}`):o==="intercepted"&&d(`🛡️ 隐私保护${t}-${e.replace(/^https?:\/\//,"")}`),console.log(`${o} ${t} ${e}`)},g=t=>(t&&console.log(`SpyRBody:${t}`),new Response(JSON.stringify({message:":)"}),{status:200,headers:{"Content-Type":"application/json"}}));window.fetch=async(t,e)=>{const o=typeof t=="string"?t:t instanceof URL?t.href:t.url,s=(e==null?void 0:e.method)||"GET",a=new URL(o,window.location.origin).hostname,r=window.location.hostname;return l(a)?(n(s,o,"intercepted"),Promise.resolve(g(e==null?void 0:e.body))):(a!==r?n(s,o,"external"):n(s,o,"normal"),m(t,e))};class h extends u{open(e,o,s=!0,p,a){const r=new URL(o,window.location.origin),R=r.hostname!==window.location.hostname;if(l(r.hostname)){n(e,o,"intercepted"),this.send=f=>{f&&console.log(`SpyRBody:${f}`)};return}R?n(e,o,"external"):n(e,o),super.open(e,o,s,p,a)}}window.XMLHttpRequest=h})()});
